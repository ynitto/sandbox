# Agent Skills

AIエージェント（GitHub Copilot / Claude Code）の能力を拡張するスキル集。
スキルは `.github/skills/` に配置された SKILL.md で定義され、エージェントが読み込むことで特定のタスクを高品質に実行できるようになる。

## スキル一覧

| スキル | 概要 |
|--------|------|
| **scrum-master** | ユーザーのプロンプトをバックログに分解し、スプリント単位でサブエージェントに委譲して実行するオーケストレーター |
| **git-skill-manager** | Git リポジトリ経由でスキルの取得（pull）・共有（push）・昇格（promote）・バージョン管理を行う |
| **skill-creator** | 新しいスキルの作成・既存スキルの改良を支援するガイド |

## インストール

```bash
git clone https://github.com/myorg/agent-skills.git
python agent-skills/install.py
```

コアスキルがユーザー領域（`~/.copilot/skills/`）にコピーされ、ソースリポジトリがレジストリに自動登録される。2回目以降の実行はスキルを上書き更新する（レジストリの既存設定は保持）。

## クイックスタート

### 1. スキルリポジトリを登録する

```
「https://github.com/myorg/agent-skills.git をスキルリポジトリに登録して」
```

### 2. スキルを取得する

```
「スキルをpullして」
```

### 3. スキルを検索する

```
「converter で検索して」        ← ローカルインデックスから即時検索
「最新のスキルを検索して」       ← リモートからインデックスを更新して検索
```

### 4. スキルのバージョンを固定する

```
「docx-converter を今のバージョンに固定して」
「全スキルをロックして」
```

### 5. ワークスペースのスキルを昇格する

```
「ワークスペースのスキルを他のプロジェクトでも使えるようにして」
```

ワークスペース内のスキルをユーザー領域にコピーし、リポジトリに push する。

## scrum-master の使い方

scrum-master は複雑なタスクをスプリント制で段階的に実行するオーケストレーター。
以下のようなフレーズで発動する。

### 発動フレーズ

- 「スクラムして」「スクラム開発して」
- 「スプリントで進めて」
- 「チームで開発して」
- 「タスク分解して実行して」
- 「バックログを作って進めて」
- 「段階的に開発して」
- 「〜を作って〜して」のような複合的な依頼

### 実行フロー

```
Phase 1  スキル探索 ─── 利用可能なスキルを把握
   │
Phase 2  バックログ作成 ─── プロンプトをタスクに分解
   │
Phase 3  スキルギャップ解決 ─── 足りないスキルを作成・改良
   │
Phase 4  スプリントプランニング ─── 3〜5タスクを選出、ユーザー承認
   │
Phase 5  タスク実行 ─── サブエージェントに委譲して並列実行（Wave単位）
   │
Phase 6  レビュー & レトロ ─── sprint-reviewer による評価
   │
Phase 7  進捗レポート ─── 次スプリント / バックログ見直し / 完了
   │
   └──→ Phase 4 に戻る（バックログ残あり）
```

### 使用例

```
ユーザー: 「React + TypeScript でダッシュボードを作って、
           テストも書いて、デプロイ設定もして」

scrum-master:
  1. バックログに分解（コンポーネント作成、API接続、テスト、CI設定 …）
  2. Sprint 1: コンポーネント設計 + API接続（3タスク）
     → ユーザー承認 → サブエージェントが実行 → レビュー
  3. Sprint 2: テスト + デプロイ設定（3タスク）
     → ユーザー承認 → サブエージェントが実行 → レビュー
  4. 最終レポート
```

### ガードレール

- 1スプリント = 3〜5タスク
- スプリント上限 = 5回（超過時はユーザーに確認）
- スキル作成の再試行 = 最大2回
- 各スプリント完了時にユーザー承認を求める

## スキル管理（git-skill-manager）

### 主要操作

| 操作 | フレーズ例 |
|------|-----------|
| リポジトリ登録 | 「リポジトリを登録して」 |
| スキル取得 | 「スキルをpullして」 |
| スキル共有 | 「スキルをpushして」 |
| 検索 | 「スキルを探して」 |
| 有効化/無効化 | 「スキルを有効化/無効化して」 |
| バージョン固定 | 「スキルを固定して」「全スキルをロックして」 |
| 昇格 | 「このスキルを他でも使えるようにして」 |
| プロファイル切替 | 「frontendプロファイルに切り替えて」 |

### 使用頻度による優先度

スキルの使用回数が自動記録され、よく使うスキルほどコンテキストに優先的にロードされる。
基盤スキル（scrum-master、git-skill-manager、skill-creator 等）は使用頻度に関わらず常に最優先。

### ディレクトリ構成

```
%USERPROFILE%\.copilot\
  ├── skills\              ← インストール済みスキル
  ├── cache\               ← リポジトリキャッシュ（永続）
  └── skill-registry.json  ← レジストリ（リポジトリ・スキル・プロファイル管理）
```

## 動作環境

- GitHub Copilot (Windows) または Claude Code
- Git インストール・認証設定済み（SSH鍵 or credential manager）
- Python 3.10 以上
