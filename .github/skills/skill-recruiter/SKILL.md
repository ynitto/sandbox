---
name: skill-recruiter
description: 必要なスキルが見つからないときに、外部リポジトリURLからスキルを取得・検証・公開するスキル。「このスキルを追加して」「URLからスキルをインストールして」「スキルが見つからない、このリポジトリを追加して」「このスキルを採用したい」「外部スキルを登録して」などで発動する。要求されたスキルが未インストールの場合に代替手段として自動起動される場合もある。
---

# Skill Recruiter

外部URLからスキルを取得し、ライセンス・構造・セキュリティを検証してから公開するスキル。

## トリガー

| トリガー | 説明 |
|---|---|
| スキル不足 | 要求されたスキルが未インストールで、URLを提示された場合 |
| ユーザー直接 | 「このURLのスキルを追加して」など |

## 処理フロー

### Phase 1: URL の収集

スキルが不足していた場合:

```
「必要なスキルがインストールされていません。
 追加したいスキルのGitリポジトリURLを教えてください。
 （GitHub / GitLab / Bitbucket / セルフホスト対応）」
```

ユーザーが直接 URL を指定した場合はそのまま使用する。
URL とともにスキルルートパスの指定がない場合は `skills` をデフォルトとして使う。

-----

### Phase 2: クローンと検証

```bash
python .github/skills/skill-recruiter/scripts/verify_skill.py <URL> [--skill-root <path>]
```

スクリプトが出力する各行の意味:

| 出力行 | 状態 | 説明 |
|---|---|---|
| `VERIFY_CLONE: ok/fail` | クローン成否 | fail なら即中止 |
| `VERIFY_LICENSE: ok/warn/fail  <名前>` | ライセンス適合性 | 下表参照 |
| `VERIFY_SKILL: ok/fail  <name>  <desc>` | SKILL.md の妥当性 | fail なら中止 |
| `VERIFY_SECURITY: ok/warn` | 簡易セキュリティ | warn は内容を提示 |
| `VERIFY_RESULT: ok/warn/fail` | 総合判定 | フローを決定する |

#### ライセンス判定基準

| 判定 | ライセンス例 | 対応 |
|---|---|---|
| ✅ ok | MIT, Apache-2.0, ISC, BSD, Unlicense, CC0 | 自動承認 |
| ⚠️ warn | GPL, LGPL, AGPL, MPL | ユーザーに提示して判断を求める |
| ❌ fail | LICENSE ファイルなし | インストール不可（理由を説明） |

-----

### Phase 3: 結果提示とユーザー確認

#### `VERIFY_RESULT: ok` の場合

```
🔍 スキル検証結果: <URL>

  クローン:      ✅ ok
  ライセンス:    ✅ MIT
  スキル構造:    ✅ <name> — <description 冒頭>
  セキュリティ:  ✅ ok（懸念なし）

  総合判定: ✅ インストール可能

このスキルを追加しますか？
  1. 追加する
  2. キャンセル
```

#### `VERIFY_RESULT: warn` の場合（ライセンス・セキュリティ警告あり）

```
⚠️ 要確認事項があります

  ライセンス: GPL-3.0（コピーレフト条項が適用される場合があります）
  セキュリティ警告:
    scripts/setup.sh: eval\s+\$（パターン検出）

内容を確認の上、判断してください。それでも追加しますか？
  1. 理解した上で追加する
  2. キャンセル
```

#### `VERIFY_RESULT: fail` の場合

```
❌ 検証に失敗しました

  理由: LICENSE ファイルが見つかりません / SKILL.md が不正です

インストールを中止します。
URLまたはスキルルートパスを確認して再度お試しください。
```

-----

### Phase 4: インストール

ユーザーが同意した場合、`.github/skills/git-skill-manager/SKILL.md` の `repo add` → `pull` の手順に従う。

1. **repo add** でリポジトリを登録する
2. **pull** でスキルをインストールする

```
✅ インストール完了
   スキル: <name>
   場所:   ~/.copilot/skills/<name>/
   次回起動時から利用可能です。
```

## 注意事項

- セキュリティチェックはパターンマッチングによる簡易チェックであり、完全な安全保証ではない
- ユーザーはインストール前にスキルの内容を自ら確認することを推奨する
- LICENSE なしのスキルは組織のポリシーに依存するためデフォルト不可
