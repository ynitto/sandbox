---
name: git-skill-manager
description: Gitãƒªãƒã‚¸ãƒˆãƒªã‚’ä½¿ã£ã¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¹ã‚­ãƒ«ã‚’ç®¡ç†ã™ã‚‹ã‚¹ã‚­ãƒ«ã€‚è¤‡æ•°ãƒªãƒã‚¸ãƒˆãƒªã®ç™»éŒ²ã€ã‚¹ã‚­ãƒ«ã®pullï¼ˆå–å¾—ï¼‰ã¨pushï¼ˆå…±æœ‰ï¼‰ã€ã‚¹ã‚­ãƒ«ã®æœ‰åŠ¹åŒ–/ç„¡åŠ¹åŒ–ã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ã‚’è¡Œã†ã€‚ã€Œã‚¹ã‚­ãƒ«ã‚’pullã—ã¦ã€ã€Œãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã‚¹ã‚­ãƒ«ã‚’å–ã£ã¦ãã¦ã€ã€Œã‚¹ã‚­ãƒ«ã‚’pushã—ã¦ã€ã€Œãƒªãƒã‚¸ãƒˆãƒªã‚’ç™»éŒ²ã—ã¦ã€ã€Œã‚¹ã‚­ãƒ«ä¸€è¦§ã€ã€Œã‚¹ã‚­ãƒ«ã‚’ç„¡åŠ¹åŒ–ã—ã¦ã€ã€Œãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ã€ãªã©ã€ã‚¹ã‚­ãƒ«ã®å–å¾—ãƒ»å…±æœ‰ãƒ»ãƒªãƒã‚¸ãƒˆãƒªç®¡ç†ãƒ»æœ‰åŠ¹åŒ–ç®¡ç†ã«é–¢ã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ä½¿ç”¨ã™ã‚‹ã€‚GitHub/GitLab/Bitbucket/ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆå•ã‚ãšå‹•ä½œã™ã‚‹ã€‚Copilot + Windowsç’°å¢ƒã§å‹•ä½œã—ã€gitã¯è¨­å®šæ¸ˆã¿ã®å‰æã€‚
---

# Git Skill Manager

Gitãƒªãƒã‚¸ãƒˆãƒªçµŒç”±ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¹ã‚­ãƒ«ã®å–å¾—ï¼ˆpullï¼‰ã¨å…±æœ‰ï¼ˆpushï¼‰ã‚’è¡Œã†ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€‚

## åˆ©ç”¨è€…

| å‘¼ã³å‡ºã—å…ƒ | æ“ä½œ | ä¾‹ |
|---|---|---|
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ç›´æ¥ | repo add / pull / search / list / enable / disable / profile | ã€Œã‚¹ã‚­ãƒ«ã‚’pullã—ã¦ã€ã€Œãƒªãƒã‚¸ãƒˆãƒªã‚’ç™»éŒ²ã—ã¦ã€ã€Œã‚¹ã‚­ãƒ«ã‚’ç„¡åŠ¹åŒ–ã—ã¦ã€ |
| scrum-master ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | push | Phase 6 ã®ã‚¹ã‚­ãƒ«å…±æœ‰æ™‚ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆçµŒç”±ã§èµ·å‹•ã•ã‚Œã‚‹ |

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç›´æ¥å‘¼ã³å‡ºã—ã®å ´åˆã€å¯¾è©±çš„ã«ç¢ºèªã—ãªãŒã‚‰é€²ã‚ã‚‹
- ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçµŒç”±ã®å ´åˆã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å¿…è¦ãªæƒ…å ±ï¼ˆå¯¾è±¡ã‚¹ã‚­ãƒ«ãƒ»ãƒªãƒã‚¸ãƒˆãƒªåãƒ»æ“ä½œï¼‰ãŒå«ã¾ã‚Œã‚‹ãŸã‚ã€ç¢ºèªãªã—ã§å®Ÿè¡Œã™ã‚‹

## å‹•ä½œç’°å¢ƒ

- **Copilot on Windows** ã¾ãŸã¯ **Claude Code**
- git ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»èªè¨¼è¨­å®šæ¸ˆã¿ï¼ˆSSHéµ or credential managerï¼‰
- ã‚·ã‚§ãƒ«ã¯ PowerShell ã¾ãŸã¯ cmd ã‚’æƒ³å®šã€‚bashã‚³ãƒãƒ³ãƒ‰ã¯ä½¿ã‚ãªã„

-----

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
ãƒ­ãƒ¼ã‚«ãƒ«ï¼ˆWindowsï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  %USERPROFILE%\.copilot\skills\          â† ã‚¹ã‚­ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆ
    â”œâ”€â”€ skill-a\SKILL.md
    â”œâ”€â”€ skill-b\SKILL.md  (enabled)
    â””â”€â”€ skill-c\SKILL.md  (disabled â†’ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿éãƒ­ãƒ¼ãƒ‰)

  %USERPROFILE%\.copilot\skill-registry.json  â† ãƒ¬ã‚¸ã‚¹ãƒˆãƒª

  %USERPROFILE%\.copilot\cache\           â† ãƒªãƒã‚¸ãƒˆãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆæ°¸ç¶šï¼‰
    â”œâ”€â”€ team-skills\                      â† åˆå›cloneã€ä»¥é™ã¯fetch
    â””â”€â”€ personal\
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         â”‚ pull              â”‚ pull + push
         â–¼                   â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ repo: team     â”‚  â”‚ repo: personal â”‚
  â”‚ (readonly)     â”‚  â”‚ (read/write)   â”‚
  â”‚ priority: 1    â”‚  â”‚ priority: 2    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

-----

## ãƒ¬ã‚¸ã‚¹ãƒˆãƒª

ãƒ‘ã‚¹: `%USERPROFILE%\.copilot\skill-registry.json`

```json
{
  "version": 2,
  "repositories": [
    {
      "name": "team-skills",
      "url": "https://github.com/myorg/agent-skills.git",
      "branch": "main",
      "skill_root": "skills",
      "description": "ãƒãƒ¼ãƒ å…±æœ‰ã‚¹ã‚­ãƒ«é›†",
      "readonly": false,
      "priority": 1
    }
  ],
  "installed_skills": [
    {
      "name": "docx-converter",
      "source_repo": "team-skills",
      "source_path": "skills/docx-converter",
      "commit_hash": "a1b2c3d",
      "installed_at": "2026-02-14T12:00:00Z",
      "enabled": true,
      "pinned_commit": null
    }
  ],
  "remote_index": {
    "team-skills": {
      "updated_at": "2026-02-15T10:00:00Z",
      "skills": [
        {"name": "docx-converter", "description": "Wordæ–‡æ›¸ã‚’PDFã«å¤‰æ›ã™ã‚‹..."},
        {"name": "image-resizer", "description": "ç”»åƒã‚’ãƒªã‚µã‚¤ã‚ºã™ã‚‹..."}
      ]
    }
  },
  "profiles": {
    "default": ["*"],
    "frontend": ["react-guide", "css-linter", "storybook"],
    "backend": ["api-guide", "db-migration", "auth"]
  },
  "active_profile": null
}
```

### ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜

**repositories[].priority** (æ•´æ•°ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 100):
- å€¤ãŒå°ã•ã„ã»ã©å„ªå…ˆåº¦ãŒé«˜ã„
- åŒåã‚¹ã‚­ãƒ«ã®ç«¶åˆæ™‚ã€ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçµŒç”±ï¼ˆéå¯¾è©±ï¼‰ã§ã¯å„ªå…ˆåº¦ã®é«˜ã„ãƒªãƒã‚¸ãƒˆãƒªã‚’è‡ªå‹•æ¡ç”¨ã™ã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç›´æ¥å‘¼ã³å‡ºã—ã§ã¯å¯¾è©±çš„ã«é¸æŠã‚’æ±‚ã‚ã‚‹

**installed_skills[].enabled** (çœŸå½å€¤ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: true):
- false ã®ã‚¹ã‚­ãƒ«ã¯ `discover_skills.py` ã«ã‚ˆã‚‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿åé›†ã‹ã‚‰é™¤å¤–ã•ã‚Œã‚‹
- ãƒ‡ã‚£ã‚¹ã‚¯ä¸Šã«ã¯ã‚¹ã‚­ãƒ«ãŒæ®‹ã‚‹ãŸã‚ã€å†æœ‰åŠ¹åŒ–ã¯å³åº§ã«å®Œäº†ã™ã‚‹

**installed_skills[].pinned_commit** (æ–‡å­—åˆ— or nullã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: null):
- null ã®å ´åˆã€pull æ™‚ã«å¸¸ã«æœ€æ–°ï¼ˆHEADï¼‰ã‚’å–å¾—ã™ã‚‹
- ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã€pull æ™‚ã«ãã®ã‚³ãƒŸãƒƒãƒˆã‚’ checkout ã—ã¦å–å¾—ã™ã‚‹
- `pin` æ“ä½œã§ç¾åœ¨ã® commit_hash ã«å›ºå®šã€`unpin` ã§è§£é™¤
- `lock` ã§å…¨ã‚¹ã‚­ãƒ«ã‚’ä¸€æ‹¬ pinã€`unlock` ã§å…¨ã‚¹ã‚­ãƒ«ã‚’ä¸€æ‹¬ unpin

**remote_index** (ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ):
- ãƒªãƒã‚¸ãƒˆãƒªå â†’ ã‚¹ã‚­ãƒ«ä¸€è¦§ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€‚`search` ãŒã“ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å‚ç…§ã™ã‚‹ãŸã‚ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸è¦ã§é«˜é€Ÿã«æ¤œç´¢ã§ãã‚‹
- `pull` å®Ÿè¡Œæ™‚ã«è‡ªå‹•æ›´æ–°ã•ã‚Œã‚‹
- `search --refresh` ã§æ˜ç¤ºçš„ã«ãƒªãƒ¢ãƒ¼ãƒˆã‹ã‚‰æ›´æ–°ã§ãã‚‹
- `updated_at` ã§é®®åº¦ã‚’ç¢ºèªå¯èƒ½

**profiles** (ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ):
- ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å â†’ ã‚¹ã‚­ãƒ«åã®ãƒªã‚¹ãƒˆã€‚`"*"` ã¯ã€Œå…¨ã‚¹ã‚­ãƒ«ã€ã‚’æ„å‘³ã™ã‚‹
- `active_profile` ãŒ null ã®å ´åˆã€å€‹åˆ¥ã® enabled ãƒ•ãƒ©ã‚°ã«å¾“ã†
- `active_profile` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ã‚¹ã‚­ãƒ«ã®ã¿ enabled ã¨ã—ã¦æ‰±ã†

ãƒ¬ã‚¸ã‚¹ãƒˆãƒªãŒå­˜åœ¨ã—ãªã‘ã‚Œã°åˆå›æ“ä½œæ™‚ã«è‡ªå‹•ä½œæˆã™ã‚‹ã€‚version: 1 ã®ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã¯è‡ªå‹•ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ï¼ˆæ–°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®šï¼‰ã€‚

-----

## æ“ä½œä¸€è¦§

|æ“ä½œ             |ãƒˆãƒªã‚¬ãƒ¼ä¾‹               |
|---------------|--------------------|
|**repo add**   |ã€Œãƒªãƒã‚¸ãƒˆãƒªã‚’ç™»éŒ²ã—ã¦ã€        |
|**repo list**  |ã€Œç™»éŒ²ãƒªãƒã‚¸ãƒˆãƒªä¸€è¦§ã€         |
|**repo remove**|ã€Œãƒªãƒã‚¸ãƒˆãƒªã‚’å‰Šé™¤ã—ã¦ã€        |
|**pull**       |ã€Œã‚¹ã‚­ãƒ«ã‚’pullã—ã¦ã€ã€Œã‚¹ã‚­ãƒ«ã‚’å–å¾—ã€|
|**push**       |ã€Œã‚¹ã‚­ãƒ«ã‚’pushã—ã¦ã€ã€Œã‚¹ã‚­ãƒ«ã‚’å…±æœ‰ã€|
|**list**       |ã€Œã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã‚¹ã‚­ãƒ«ä¸€è¦§ã€     |
|**search**     |ã€Œãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚‹ã‚¹ã‚­ãƒ«ã‚’æ¢ã—ã¦ã€   |
|**search --refresh**|ã€Œæœ€æ–°ã®ã‚¹ã‚­ãƒ«ã‚’æ¤œç´¢ã—ã¦ã€  |
|**enable**     |ã€Œã‚¹ã‚­ãƒ«ã‚’æœ‰åŠ¹åŒ–ã—ã¦ã€         |
|**disable**    |ã€Œã‚¹ã‚­ãƒ«ã‚’ç„¡åŠ¹åŒ–ã—ã¦ã€         |
|**pin**        |ã€Œã‚¹ã‚­ãƒ«ã‚’å›ºå®šã—ã¦ã€ã€Œãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’pinã—ã¦ã€|
|**unpin**      |ã€Œã‚¹ã‚­ãƒ«ã®å›ºå®šã‚’è§£é™¤ã—ã¦ã€       |
|**lock**       |ã€Œå…¨ã‚¹ã‚­ãƒ«ã‚’ãƒ­ãƒƒã‚¯ã—ã¦ã€        |
|**unlock**     |ã€Œå…¨ã‚¹ã‚­ãƒ«ã®ãƒ­ãƒƒã‚¯ã‚’è§£é™¤ã—ã¦ã€     |
|**profile use**|ã€Œãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ã€      |
|**profile create**|ã€Œãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã€    |
|**profile list**|ã€Œãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã€         |
|**profile delete**|ã€Œãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¦ã€    |

-----

## ãƒ‘ã‚¹å®šç¾©

ã™ã¹ã¦ã®æ“ä½œã§ä»¥ä¸‹ã®ãƒ‘ã‚¹ã‚’ä½¿ã†ã€‚

```powershell
$SKILL_HOME   = "$env:USERPROFILE\.copilot\skills"
$REGISTRY     = "$env:USERPROFILE\.copilot\skill-registry.json"
$CACHE_DIR    = "$env:USERPROFILE\.copilot\cache"
```

åˆå›ã¯ `$SKILL_HOME` ã¨ `$CACHE_DIR` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã™ã‚‹:

```powershell
if (-not (Test-Path $SKILL_HOME)) { New-Item -ItemType Directory -Path $SKILL_HOME -Force }
if (-not (Test-Path $CACHE_DIR))  { New-Item -ItemType Directory -Path $CACHE_DIR -Force }
```

-----

## ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

version: 1 ã®ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‚’èª­ã¿è¾¼ã‚“ã å ´åˆã€ä»¥ä¸‹ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é©ç”¨ã™ã‚‹ã€‚

```python
def migrate_registry(reg):
    """version 1 â†’ 2 ã¸ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚"""
    if reg.get("version", 1) >= 2:
        return reg
    # repositories: priority ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ 
    for repo in reg.get("repositories", []):
        repo.setdefault("priority", 100)
    # installed_skills: enabled, pinned_commit ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ 
    for skill in reg.get("installed_skills", []):
        skill.setdefault("enabled", True)
        skill.setdefault("pinned_commit", None)
    # profiles ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ 
    reg.setdefault("profiles", {"default": ["*"]})
    reg.setdefault("active_profile", None)
    # remote_index ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ 
    reg.setdefault("remote_index", {})
    reg["version"] = 2
    return reg
```

-----

## repo add

```powershell
# æ¥ç¶šç¢ºèª
git ls-remote $REPO_URL HEAD

# æˆåŠŸã—ãŸã‚‰ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã«è¿½åŠ 
```

```python
import json, os
from datetime import datetime, timezone

registry_path = os.path.join(os.environ["USERPROFILE"], ".copilot", "skill-registry.json")

def load_registry():
    if os.path.exists(registry_path):
        with open(registry_path, encoding="utf-8") as f:
            reg = json.load(f)
        return migrate_registry(reg)
    return {"version": 2, "repositories": [], "installed_skills": [],
            "remote_index": {},
            "profiles": {"default": ["*"]}, "active_profile": None}

def save_registry(reg):
    os.makedirs(os.path.dirname(registry_path), exist_ok=True)
    with open(registry_path, "w", encoding="utf-8") as f:
        json.dump(reg, f, indent=2, ensure_ascii=False)

def add_repo(name, url, branch="main", skill_root="skills", description="", readonly=False, priority=100):
    reg = load_registry()
    if any(r["name"] == name for r in reg["repositories"]):
        print(f"'{name}' ã¯æ—¢ã«ç™»éŒ²æ¸ˆã¿ã§ã™")
        return
    reg["repositories"].append({
        "name": name,
        "url": url,
        "branch": branch,
        "skill_root": skill_root,
        "description": description,
        "readonly": readonly,
        "priority": priority,
    })
    save_registry(reg)
    print(f"âœ… ãƒªãƒã‚¸ãƒˆãƒª '{name}' ã‚’ç™»éŒ²ã—ã¾ã—ãŸï¼ˆpriority: {priority}ï¼‰")
```

-----

## pull

### å‡¦ç†ãƒ•ãƒ­ãƒ¼

```python
import subprocess, shutil, os, re, json, glob
from datetime import datetime

cache_dir = os.path.join(os.environ["USERPROFILE"], ".copilot", "cache")
skill_home = os.path.join(os.environ["USERPROFILE"], ".copilot", "skills")

def clone_or_fetch(repo):
    """
    ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒªãƒã‚¸ãƒˆãƒªã‚’å–å¾—ã™ã‚‹ã€‚
    åˆå›: git clone --depth 1
    2å›ç›®ä»¥é™: git fetch + git reset --hardï¼ˆé«˜é€Ÿï¼‰
    ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒç ´æã—ã¦ã„ã‚‹å ´åˆ: å‰Šé™¤ã—ã¦å†clone
    """
    repo_cache = os.path.join(cache_dir, repo["name"])
    os.makedirs(cache_dir, exist_ok=True)

    if os.path.isdir(os.path.join(repo_cache, ".git")):
        # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚ã‚Š â†’ fetch ã§æ›´æ–°ï¼ˆé«˜é€Ÿï¼‰
        try:
            subprocess.run(
                ["git", "fetch", "origin", repo["branch"]],
                cwd=repo_cache, check=True,
                capture_output=True, text=True,
            )
            subprocess.run(
                ["git", "reset", "--hard", f"origin/{repo['branch']}"],
                cwd=repo_cache, check=True,
                capture_output=True, text=True,
            )
            return repo_cache
        except subprocess.CalledProcessError:
            # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç ´æ â†’ å‰Šé™¤ã—ã¦å†clone
            shutil.rmtree(repo_cache, ignore_errors=True)

    # åˆå› or ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç ´æ â†’ clone
    subprocess.run([
        "git", "clone", "--depth", "1",
        "--branch", repo["branch"],
        repo["url"], repo_cache
    ], check=True)
    return repo_cache


def update_remote_index(reg, repo_name, repo_cache, skill_root):
    """ãƒªãƒ¢ãƒ¼ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°ã™ã‚‹ã€‚pull / search --refresh æ™‚ã«å‘¼ã°ã‚Œã‚‹ã€‚"""
    remote_index = reg.setdefault("remote_index", {})
    root = os.path.join(repo_cache, skill_root)
    if not os.path.isdir(root):
        return

    skills_list = []
    for entry in sorted(os.listdir(root)):
        skill_md = os.path.join(root, entry, "SKILL.md")
        if not os.path.isfile(skill_md):
            continue
        with open(skill_md, encoding="utf-8") as f:
            content = f.read()
        desc = ""
        fm_match = re.match(r'^---\s*\n(.*?)\n---', content, re.DOTALL)
        if fm_match:
            for line in fm_match.group(1).splitlines():
                if line.startswith("description:"):
                    desc = line[len("description:"):].strip()
                    break
        skills_list.append({"name": entry, "description": desc[:200]})

    remote_index[repo_name] = {
        "updated_at": datetime.now().isoformat(),
        "skills": skills_list,
    }


def pull_skills(repo_name=None, skill_name=None, interactive=True):
    """
    repo_name=None â†’ å…¨ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰å–å¾—
    skill_name=None â†’ ãƒªãƒã‚¸ãƒˆãƒªå†…ã®å…¨ã‚¹ã‚­ãƒ«ã‚’å–å¾—
    interactive=True â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç›´æ¥å‘¼ã³å‡ºã—ï¼ˆç«¶åˆæ™‚ã«ç¢ºèªï¼‰
    interactive=False â†’ ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçµŒç”±ï¼ˆè‡ªå‹•è§£æ±ºï¼‰
    """
    reg = load_registry()
    repos = reg["repositories"]
    if repo_name:
        repos = [r for r in repos if r["name"] == repo_name]
        if not repos:
            print(f"âŒ ãƒªãƒã‚¸ãƒˆãƒª '{repo_name}' ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
            return

    os.makedirs(skill_home, exist_ok=True)

    # å…¨ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã‚¹ã‚­ãƒ«å€™è£œã‚’åé›†
    candidates = {}  # skill_name -> [{ repo, path, date, ... }]

    for repo in repos:
        repo_cache = clone_or_fetch(repo)

        # ãƒªãƒ¢ãƒ¼ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°
        update_remote_index(reg, repo["name"], repo_cache, repo["skill_root"])

        root = os.path.join(repo_cache, repo["skill_root"])
        if not os.path.isdir(root):
            continue

        for entry in os.listdir(root):
            skill_md = os.path.join(root, entry, "SKILL.md")
            if not os.path.isfile(skill_md):
                continue
            if skill_name and entry != skill_name:
                continue

            # SKILL.md ã‹ã‚‰ description ã‚’å–å¾—
            with open(skill_md, encoding="utf-8") as f:
                content = f.read()
            desc = ""
            fm_match = re.match(r'^---\s*\n(.*?)\n---', content, re.DOTALL)
            if fm_match:
                for line in fm_match.group(1).splitlines():
                    if line.startswith("description:"):
                        desc = line[len("description:"):].strip()
                        break

            # ã‚³ãƒŸãƒƒãƒˆæ—¥æ™‚ã‚’å–å¾—
            result = subprocess.run(
                ["git", "log", "-1", "--format=%aI", "--",
                 os.path.join(repo["skill_root"], entry).replace("\\", "/")],
                cwd=repo_cache, capture_output=True, text=True
            )
            commit_date = result.stdout.strip() or "1970-01-01T00:00:00+00:00"

            commit_hash = subprocess.run(
                ["git", "rev-parse", "--short", "HEAD"],
                cwd=repo_cache, capture_output=True, text=True
            ).stdout.strip()

            candidates.setdefault(entry, []).append({
                "repo_name": repo["name"],
                "repo_priority": repo.get("priority", 100),
                "source_path": os.path.join(repo["skill_root"], entry),
                "full_path": os.path.join(root, entry),
                "commit_date": commit_date,
                "commit_hash": commit_hash,
                "description": desc[:80],
            })

    # ---- ç«¶åˆè§£æ±º ----
    installed = []
    conflicts = []

    for sname, sources in candidates.items():
        winner = sources[0]

        if len(sources) > 1:
            if interactive:
                # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç›´æ¥å‘¼ã³å‡ºã— â†’ å¯¾è©±çš„ã«é¸æŠ
                print(f"\nâš ï¸ ç«¶åˆ: '{sname}' ãŒè¤‡æ•°ãƒªãƒã‚¸ãƒˆãƒªã«å­˜åœ¨ã—ã¾ã™")
                for i, s in enumerate(sources, 1):
                    short_desc = s["description"] or "(èª¬æ˜ãªã—)"
                    print(f"   {i}. {s['repo_name']:20s}  ({s['commit_date'][:10]})  {short_desc}")
                print(f"   ã©ã¡ã‚‰ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã‹ï¼Ÿ (1-{len(sources)})")

                # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠã‚’å¾…ã¤ï¼ˆClaudeãŒå¯¾è©±çš„ã«å‡¦ç†ã™ã‚‹ï¼‰
                # é¸æŠã•ã‚ŒãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ choice ã«æ ¼ç´
                # choice = <ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠ (1-based)>
                # winner = sources[choice - 1]

                # â€» å®Ÿéš›ã«ã¯Claude ãŒä¸Šè¨˜ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºåŠ›å¾Œã€
                #   ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”ã«åŸºã¥ã„ã¦ winner ã‚’æ±ºå®šã™ã‚‹
                winner = sources[0]  # ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼: ClaudeãŒå¯¾è©±ã§æ±ºå®š
            else:
                # ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçµŒç”± â†’ ãƒªãƒã‚¸ãƒˆãƒªå„ªå…ˆåº¦ã§è‡ªå‹•è§£æ±º
                sources.sort(key=lambda s: s["repo_priority"])
                winner = sources[0]

            conflicts.append({
                "skill": sname,
                "adopted": winner["repo_name"],
                "rejected": [s["repo_name"] for s in sources if s != winner],
            })

        # ---- pinned_commit å¯¾å¿œ ----
        existing_skill = next(
            (s for s in reg.get("installed_skills", []) if s["name"] == sname),
            None,
        )
        pinned = existing_skill.get("pinned_commit") if existing_skill else None

        if pinned:
            # pin ã•ã‚Œã¦ã„ã‚‹å ´åˆ: æŒ‡å®šã‚³ãƒŸãƒƒãƒˆã‚’ checkout ã—ã¦ã‹ã‚‰ã‚³ãƒ”ãƒ¼
            repo_cache = os.path.join(cache_dir, winner["repo_name"])
            try:
                subprocess.run(
                    ["git", "fetch", "--depth", "1", "origin", pinned],
                    cwd=repo_cache, check=True,
                    capture_output=True, text=True,
                )
                subprocess.run(
                    ["git", "checkout", pinned],
                    cwd=repo_cache, check=True,
                    capture_output=True, text=True,
                )
                # full_path ã‚’ãƒ”ãƒ³å¾Œã®ãƒ‘ã‚¹ã§ä¸Šæ›¸ã
                winner["full_path"] = os.path.join(
                    repo_cache, winner["source_path"]
                )
                winner["commit_hash"] = pinned[:7]
                print(f"   ğŸ“Œ {sname}: pinned commit {pinned[:7]} ã‚’ä½¿ç”¨")
            except subprocess.CalledProcessError:
                print(f"   âš ï¸ {sname}: pinned commit {pinned[:7]} ã®å–å¾—ã«å¤±æ•—ã€‚æœ€æ–°ç‰ˆã‚’ä½¿ç”¨ã—ã¾ã™")
                pinned = None

        dest = os.path.join(skill_home, sname)
        if os.path.exists(dest):
            shutil.rmtree(dest)
        shutil.copytree(winner["full_path"], dest)

        # æ—¢å­˜ã® enabled / pinned_commit çŠ¶æ…‹ã‚’ä¿æŒ
        enabled = existing_skill.get("enabled", True) if existing_skill else True

        installed.append({
            "name": sname,
            "source_repo": winner["repo_name"],
            "source_path": winner["source_path"],
            "commit_hash": winner["commit_hash"],
            "installed_at": datetime.now().isoformat(),
            "enabled": enabled,
            "pinned_commit": pinned,
        })

    # ãƒ¬ã‚¸ã‚¹ãƒˆãƒªæ›´æ–°
    existing = {s["name"]: s for s in reg.get("installed_skills", [])}
    for s in installed:
        existing[s["name"]] = s
    reg["installed_skills"] = list(existing.values())
    save_registry(reg)

    # çµæœãƒ¬ãƒãƒ¼ãƒˆ
    print(f"\nğŸ“¦ pull å®Œäº†")
    print(f"   æ–°è¦/æ›´æ–°: {len(installed)} ä»¶")
    if conflicts:
        print(f"   ç«¶åˆè§£æ±º:  {len(conflicts)} ä»¶")
        for c in conflicts:
            print(f"     {c['skill']}: {c['adopted']} ã‚’æ¡ç”¨ï¼ˆ{', '.join(c['rejected'])} ã‚’ä¸æ¡ç”¨ï¼‰")
    for s in installed:
        pin_mark = f" ğŸ“Œ{s['pinned_commit'][:7]}" if s.get("pinned_commit") else ""
        status = "âœ…" if s["enabled"] else "â¸ï¸"
        print(f"   {status} {s['name']} â† {s['source_repo']} ({s['commit_hash']}){pin_mark}")
```

-----

## push

### å‡¦ç†ãƒ•ãƒ­ãƒ¼

```python
def push_skill(skill_path, repo_name, branch_strategy="new_branch", commit_msg=None):
    """
    skill_path: ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã‚¹ã‚­ãƒ«ãƒ•ã‚©ãƒ«ãƒ€ã®ãƒ‘ã‚¹
    repo_name: ãƒ—ãƒƒã‚·ãƒ¥å…ˆãƒªãƒã‚¸ãƒˆãƒªåï¼ˆãƒ¬ã‚¸ã‚¹ãƒˆãƒªã® nameï¼‰
    branch_strategy: "new_branch" or "direct"
    """
    reg = load_registry()
    repo = next((r for r in reg["repositories"] if r["name"] == repo_name), None)
    if not repo:
        print(f"âŒ ãƒªãƒã‚¸ãƒˆãƒª '{repo_name}' ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
        return

    if repo.get("readonly", False):
        print(f"âŒ ãƒªãƒã‚¸ãƒˆãƒª '{repo_name}' ã¯ readonly ã§ã™ã€‚push ã§ãã¾ã›ã‚“")
        return

    skill_md = os.path.join(skill_path, "SKILL.md")
    if not os.path.isfile(skill_md):
        print(f"âŒ SKILL.md ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: {skill_path}")
        return

    skill_name = os.path.basename(skill_path.rstrip("\\/"))

    # push ç”¨ã¯ä¸€æ™‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½¿ç”¨ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ã¯åˆ¥ï¼‰
    temp_work = os.path.join(os.environ["TEMP"], "agent-skill-push")
    clone_dir = os.path.join(temp_work, f"push-{repo_name}")
    if os.path.exists(clone_dir):
        shutil.rmtree(clone_dir)

    # clone
    subprocess.run([
        "git", "clone", "--depth", "1",
        "--branch", repo["branch"],
        repo["url"], clone_dir
    ], check=True)

    # ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
    push_branch = repo["branch"]
    if branch_strategy == "new_branch":
        push_branch = f"add-skill/{skill_name}"
        subprocess.run(["git", "checkout", "-b", push_branch], cwd=clone_dir, check=True)

    # ã‚¹ã‚­ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
    dest = os.path.join(clone_dir, repo["skill_root"], skill_name)
    if os.path.exists(dest):
        shutil.rmtree(dest)
    shutil.copytree(skill_path, dest)

    # ä¸è¦ãƒ•ã‚¡ã‚¤ãƒ«é™¤å¤–
    for pattern in ["__pycache__", ".DS_Store", "*.pyc", "node_modules"]:
        for match in glob.glob(os.path.join(dest, "**", pattern), recursive=True):
            if os.path.isdir(match):
                shutil.rmtree(match)
            else:
                os.remove(match)

    # commit & push
    if not commit_msg:
        commit_msg = f"Add skill: {skill_name}"

    subprocess.run(["git", "add", "."], cwd=clone_dir, check=True)

    # å¤‰æ›´ãŒã‚ã‚‹ã‹ç¢ºèª
    diff = subprocess.run(["git", "diff", "--cached", "--quiet"], cwd=clone_dir)
    if diff.returncode == 0:
        print("â„¹ï¸ å¤‰æ›´ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ—ãƒƒã‚·ãƒ¥ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™")
        shutil.rmtree(temp_work, ignore_errors=True)
        return

    subprocess.run(["git", "commit", "-m", commit_msg], cwd=clone_dir, check=True)
    subprocess.run(["git", "push", "origin", push_branch], cwd=clone_dir, check=True)

    commit_hash = subprocess.run(
        ["git", "rev-parse", "--short", "HEAD"],
        cwd=clone_dir, capture_output=True, text=True
    ).stdout.strip()

    # ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
    shutil.rmtree(temp_work, ignore_errors=True)

    print(f"\nğŸš€ push å®Œäº†")
    print(f"   ã‚¹ã‚­ãƒ«:     {skill_name}")
    print(f"   ãƒªãƒã‚¸ãƒˆãƒª: {repo_name} ({repo['url']})")
    print(f"   ãƒ–ãƒ©ãƒ³ãƒ:   {push_branch}")
    print(f"   ã‚³ãƒŸãƒƒãƒˆ:   {commit_hash}")
    if branch_strategy == "new_branch":
        print(f"   ğŸ’¡ PR/MR ã‚’ä½œæˆã—ã¦ãƒãƒ¼ã‚¸ã—ã¦ãã ã•ã„")
```

-----

## list

```python
def list_skills():
    reg = load_registry()
    registry_map = {s["name"]: s for s in reg.get("installed_skills", [])}
    active_profile = reg.get("active_profile")
    profiles = reg.get("profiles", {})

    print(f"ğŸ“‚ ã‚¹ã‚­ãƒ«ä¸€è¦§ ({skill_home})")
    if active_profile:
        print(f"   ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«: {active_profile}")
    print()

    if not os.path.isdir(skill_home):
        print("   (ã‚¹ã‚­ãƒ«ãªã—)")
        return

    for entry in sorted(os.listdir(skill_home)):
        if not os.path.isfile(os.path.join(skill_home, entry, "SKILL.md")):
            continue
        info = registry_map.get(entry, {})
        repo = info.get("source_repo", "local")
        hash_ = info.get("commit_hash", "-")
        enabled = is_skill_enabled(entry, reg)
        pinned = info.get("pinned_commit")
        status = "âœ…" if enabled else "â¸ï¸"
        pin_mark = f" ğŸ“Œ{pinned[:7]}" if pinned else ""
        print(f"   {status} {entry:30s}  repo: {repo:20s}  commit: {hash_}{pin_mark}")


def is_skill_enabled(skill_name, reg):
    """ã‚¹ã‚­ãƒ«ãŒæœ‰åŠ¹ã‹ã©ã†ã‹ã‚’åˆ¤å®šã™ã‚‹ã€‚ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã¨enabledãƒ•ãƒ©ã‚°ã®ä¸¡æ–¹ã‚’è€ƒæ…®ã€‚"""
    active_profile = reg.get("active_profile")
    profiles = reg.get("profiles", {})

    if active_profile and active_profile in profiles:
        profile_skills = profiles[active_profile]
        if "*" not in profile_skills and skill_name not in profile_skills:
            return False

    # å€‹åˆ¥ã® enabled ãƒ•ãƒ©ã‚°
    skill_info = next(
        (s for s in reg.get("installed_skills", []) if s["name"] == skill_name),
        None,
    )
    if skill_info and not skill_info.get("enabled", True):
        return False

    return True
```

-----

## search

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãƒ¬ã‚¸ã‚¹ãƒˆãƒªå†…ã® `remote_index` ã‚’æ¤œç´¢ã™ã‚‹ï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸è¦ã€å³åº§ã«çµæœã‚’è¿”ã™ï¼‰ã€‚
`--refresh` æŒ‡å®šæ™‚ã¯ãƒªãƒ¢ãƒ¼ãƒˆã‹ã‚‰æœ€æ–°æƒ…å ±ã‚’å–å¾—ã—ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°ã—ã¦ã‹ã‚‰æ¤œç´¢ã™ã‚‹ã€‚
ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒç©ºã®å ´åˆï¼ˆåˆå›ï¼‰ã¯è‡ªå‹•çš„ã« `--refresh` ã¨åŒæ§˜ã®å‹•ä½œã‚’ã™ã‚‹ã€‚

```python
def search_skills(repo_name=None, keyword=None, refresh=False):
    reg = load_registry()
    repos = reg["repositories"]
    if repo_name:
        repos = [r for r in repos if r["name"] == repo_name]

    remote_index = reg.get("remote_index", {})

    # ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒç©º or --refresh â†’ ãƒªãƒ¢ãƒ¼ãƒˆã‹ã‚‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°
    needs_refresh = refresh or not any(
        repo["name"] in remote_index for repo in repos
    )

    if needs_refresh:
        print("ğŸ”„ ãƒªãƒ¢ãƒ¼ãƒˆã‹ã‚‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°ä¸­...")
        for repo in repos:
            repo_cache = clone_or_fetch(repo)
            update_remote_index(reg, repo["name"], repo_cache, repo["skill_root"])
        save_registry(reg)
        remote_index = reg.get("remote_index", {})

    # ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‹ã‚‰æ¤œç´¢
    for repo in repos:
        index_entry = remote_index.get(repo["name"])
        if not index_entry:
            continue

        print(f"\nğŸ” {repo['name']} ({repo['url']})")
        updated = index_entry.get("updated_at", "ä¸æ˜")[:10]
        print(f"   (ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–°æ—¥: {updated})")

        found = False
        for skill in index_entry.get("skills", []):
            name = skill["name"]
            desc = skill.get("description", "")

            if keyword and keyword.lower() not in name.lower() and keyword.lower() not in desc.lower():
                continue

            found = True
            short_desc = desc[:80] + "..." if len(desc) > 80 else desc
            print(f"   {name:30s}  {short_desc}")

        if not found:
            print("   (è©²å½“ãªã—)")
```

-----

## enable / disable

ã‚¹ã‚­ãƒ«ã®æœ‰åŠ¹ãƒ»ç„¡åŠ¹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã€‚ç„¡åŠ¹åŒ–ã•ã‚ŒãŸã‚¹ã‚­ãƒ«ã¯ãƒ‡ã‚£ã‚¹ã‚¯ä¸Šã«æ®‹ã‚‹ãŒã€`discover_skills.py` ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿åé›†ã‹ã‚‰é™¤å¤–ã•ã‚Œã‚‹ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ç¯€ç´„ï¼‰ã€‚

```python
def enable_skill(skill_name):
    reg = load_registry()
    skill = next(
        (s for s in reg.get("installed_skills", []) if s["name"] == skill_name),
        None,
    )
    if not skill:
        print(f"âŒ ã‚¹ã‚­ãƒ« '{skill_name}' ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“")
        return
    if skill.get("enabled", True):
        print(f"â„¹ï¸ ã‚¹ã‚­ãƒ« '{skill_name}' ã¯æ—¢ã«æœ‰åŠ¹ã§ã™")
        return
    skill["enabled"] = True
    save_registry(reg)
    print(f"âœ… ã‚¹ã‚­ãƒ« '{skill_name}' ã‚’æœ‰åŠ¹åŒ–ã—ã¾ã—ãŸ")


def disable_skill(skill_name):
    reg = load_registry()
    skill = next(
        (s for s in reg.get("installed_skills", []) if s["name"] == skill_name),
        None,
    )
    if not skill:
        print(f"âŒ ã‚¹ã‚­ãƒ« '{skill_name}' ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“")
        return
    if not skill.get("enabled", True):
        print(f"â„¹ï¸ ã‚¹ã‚­ãƒ« '{skill_name}' ã¯æ—¢ã«ç„¡åŠ¹ã§ã™")
        return
    skill["enabled"] = False
    save_registry(reg)
    print(f"â¸ï¸ ã‚¹ã‚­ãƒ« '{skill_name}' ã‚’ç„¡åŠ¹åŒ–ã—ã¾ã—ãŸ")
```

-----

## pin / unpin

ã‚¹ã‚­ãƒ«ã‚’ç‰¹å®šã®ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥ã«å›ºå®šã™ã‚‹ã€‚pin ã•ã‚ŒãŸã‚¹ã‚­ãƒ«ã¯ pull æ™‚ã«ãã®ã‚³ãƒŸãƒƒãƒˆã®å†…å®¹ã‚’å–å¾—ã—ã€æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¯æ›´æ–°ã•ã‚Œãªã„ã€‚

```python
def pin_skill(skill_name, commit=None):
    """
    commit=None â†’ ç¾åœ¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã® commit_hash ã«å›ºå®š
    commit=æŒ‡å®š â†’ æŒ‡å®šã‚³ãƒŸãƒƒãƒˆã«å›ºå®š
    """
    reg = load_registry()
    skill = next(
        (s for s in reg.get("installed_skills", []) if s["name"] == skill_name),
        None,
    )
    if not skill:
        print(f"âŒ ã‚¹ã‚­ãƒ« '{skill_name}' ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“")
        return

    target = commit or skill.get("commit_hash")
    if not target:
        print(f"âŒ ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥ãŒä¸æ˜ã§ã™ã€‚å…ˆã« pull ã—ã¦ãã ã•ã„")
        return

    skill["pinned_commit"] = target
    save_registry(reg)
    print(f"ğŸ“Œ ã‚¹ã‚­ãƒ« '{skill_name}' ã‚’ {target[:7]} ã«å›ºå®šã—ã¾ã—ãŸ")


def unpin_skill(skill_name):
    reg = load_registry()
    skill = next(
        (s for s in reg.get("installed_skills", []) if s["name"] == skill_name),
        None,
    )
    if not skill:
        print(f"âŒ ã‚¹ã‚­ãƒ« '{skill_name}' ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“")
        return
    if not skill.get("pinned_commit"):
        print(f"â„¹ï¸ ã‚¹ã‚­ãƒ« '{skill_name}' ã¯å›ºå®šã•ã‚Œã¦ã„ã¾ã›ã‚“")
        return

    skill["pinned_commit"] = None
    save_registry(reg)
    print(f"ğŸ”“ ã‚¹ã‚­ãƒ« '{skill_name}' ã®å›ºå®šã‚’è§£é™¤ã—ã¾ã—ãŸï¼ˆæ¬¡å› pull ã§æœ€æ–°ç‰ˆã‚’å–å¾—ã—ã¾ã™ï¼‰")
```

-----

## lock / unlock

å…¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã‚¹ã‚­ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸€æ‹¬ã§å›ºå®šãƒ»è§£é™¤ã™ã‚‹ã€‚ãƒãƒ¼ãƒ ã§åŒã˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¹ã‚­ãƒ«ã‚»ãƒƒãƒˆã‚’å…±æœ‰ã™ã‚‹ã¨ãã«ä½¿ã†ã€‚

```python
def lock_all():
    """å…¨ã‚¹ã‚­ãƒ«ã‚’ç¾åœ¨ã® commit_hash ã«ä¸€æ‹¬å›ºå®šã™ã‚‹ã€‚"""
    reg = load_registry()
    skills = reg.get("installed_skills", [])
    locked = 0

    for skill in skills:
        hash_ = skill.get("commit_hash")
        if hash_ and not skill.get("pinned_commit"):
            skill["pinned_commit"] = hash_
            locked += 1

    save_registry(reg)
    print(f"ğŸ”’ lock å®Œäº†: {locked} ä»¶ã®ã‚¹ã‚­ãƒ«ã‚’å›ºå®šã—ã¾ã—ãŸ")
    for skill in skills:
        pin = skill.get("pinned_commit")
        if pin:
            print(f"   ğŸ“Œ {skill['name']:30s}  {pin[:7]}")


def unlock_all():
    """å…¨ã‚¹ã‚­ãƒ«ã®å›ºå®šã‚’ä¸€æ‹¬è§£é™¤ã™ã‚‹ã€‚"""
    reg = load_registry()
    skills = reg.get("installed_skills", [])
    unlocked = 0

    for skill in skills:
        if skill.get("pinned_commit"):
            skill["pinned_commit"] = None
            unlocked += 1

    save_registry(reg)
    print(f"ğŸ”“ unlock å®Œäº†: {unlocked} ä»¶ã®ã‚¹ã‚­ãƒ«ã®å›ºå®šã‚’è§£é™¤ã—ã¾ã—ãŸ")
```

-----

## profile

ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚¹ã‚­ãƒ«ã®æœ‰åŠ¹ãƒ»ç„¡åŠ¹ã‚’ä¸€æ‹¬ã§åˆ‡ã‚Šæ›¿ãˆã‚‹ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã€‚ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹ã¨ã€ãã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã«å«ã¾ã‚Œã‚‹ã‚¹ã‚­ãƒ«ã®ã¿ãŒã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã€‚

### profile create

```python
def profile_create(profile_name, skill_names):
    """
    profile_name: ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«å
    skill_names: ã‚¹ã‚­ãƒ«åã®ãƒªã‚¹ãƒˆï¼ˆ"*" ã§å…¨ã‚¹ã‚­ãƒ«ï¼‰
    """
    reg = load_registry()
    profiles = reg.setdefault("profiles", {})

    if profile_name in profiles:
        print(f"âš ï¸ ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« '{profile_name}' ã‚’ä¸Šæ›¸ãã—ã¾ã™")

    profiles[profile_name] = skill_names
    save_registry(reg)
    print(f"âœ… ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« '{profile_name}' ã‚’ä½œæˆã—ã¾ã—ãŸ: {', '.join(skill_names)}")
```

### profile use

```python
def profile_use(profile_name):
    """ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹ã€‚None ã‚’æŒ‡å®šã™ã‚‹ã¨å€‹åˆ¥ enabled ã«æˆ»ã‚‹ã€‚"""
    reg = load_registry()
    profiles = reg.get("profiles", {})

    if profile_name is not None and profile_name not in profiles:
        print(f"âŒ ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« '{profile_name}' ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
        print(f"   åˆ©ç”¨å¯èƒ½: {', '.join(profiles.keys())}")
        return

    reg["active_profile"] = profile_name
    save_registry(reg)

    if profile_name is None:
        print("âœ… ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£é™¤ã—ã¾ã—ãŸï¼ˆå€‹åˆ¥ã® enabled è¨­å®šã«å¾“ã„ã¾ã™ï¼‰")
    else:
        skills = profiles[profile_name]
        label = "å…¨ã‚¹ã‚­ãƒ«" if "*" in skills else ", ".join(skills)
        print(f"âœ… ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« '{profile_name}' ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã—ã¾ã—ãŸ: {label}")
```

### profile list

```python
def profile_list():
    reg = load_registry()
    profiles = reg.get("profiles", {})
    active = reg.get("active_profile")

    if not profiles:
        print("   (ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãªã—)")
        return

    print("ğŸ“‹ ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§\n")
    for name, skills in profiles.items():
        marker = " â—€ active" if name == active else ""
        label = "å…¨ã‚¹ã‚­ãƒ«" if "*" in skills else ", ".join(skills)
        print(f"   {name:20s}  [{label}]{marker}")
```

### profile delete

```python
def profile_delete(profile_name):
    reg = load_registry()
    profiles = reg.get("profiles", {})

    if profile_name not in profiles:
        print(f"âŒ ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« '{profile_name}' ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
        return

    if profile_name == "default":
        print(f"âŒ 'default' ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã¯å‰Šé™¤ã§ãã¾ã›ã‚“")
        return

    if reg.get("active_profile") == profile_name:
        reg["active_profile"] = None

    del profiles[profile_name]
    save_registry(reg)
    print(f"âœ… ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« '{profile_name}' ã‚’å‰Šé™¤ã—ã¾ã—ãŸ")
```

-----

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

|ã‚¨ãƒ©ãƒ¼               |å¯¾å‡¦                         |
|------------------|---------------------------|
|`git ls-remote` å¤±æ•—|URLãƒ»èªè¨¼ã‚’ç¢ºèªã™ã‚‹ã‚ˆã†æ¡ˆå†…            |
|clone å¤±æ•—          |ãƒ–ãƒ©ãƒ³ãƒåã‚’ `git ls-remote` ã§ç¢ºèª |
|fetch å¤±æ•—ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ç ´æï¼‰|ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã—ã¦å†clone          |
|push to readonly  |readonlyãƒªãƒã‚¸ãƒˆãƒªã¸ã®pushæ‹’å¦ã‚’é€šçŸ¥ã€‚åˆ¥ãƒªãƒã‚¸ãƒˆãƒªã‚’ææ¡ˆã™ã‚‹|
|push rejected     |`git pull --rebase` å¾Œã«å†push|
|SKILL.md ãªã—       |ã‚¹ã‚­ãƒ«ãƒ•ã‚©ãƒ«ãƒ€ã®æ§‹æˆç¢ºèªã‚’æ¡ˆå†…            |
|ãƒ¬ã‚¸ã‚¹ãƒˆãƒªç ´æ           |å‰Šé™¤ã—ã¦å†ä½œæˆã™ã‚‹ã‹ã€ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰å†pull    |
|ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼         |ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèªã™ã‚‹ã‚ˆã†æ¡ˆå†…          |

-----

## ä½¿ç”¨ä¾‹

### åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œhttps://github.com/myorg/skills.git ã‚’ã‚¹ã‚­ãƒ«ãƒªãƒã‚¸ãƒˆãƒªã«ç™»éŒ²ã—ã¦ã€

Copilot:
  1. git ls-remote ã§æ¥ç¶šç¢ºèª
  2. ãƒ¬ã‚¸ã‚¹ãƒˆãƒªä½œæˆã€ãƒªãƒã‚¸ãƒˆãƒªè¿½åŠ ï¼ˆreadonlyã«ã™ã‚‹ã‹ç¢ºèªã€priorityã‚’ç¢ºèªï¼‰
  3. ã€Œç™»éŒ²ã—ã¾ã—ãŸã€‚pullã—ã¾ã™ã‹ï¼Ÿã€
```

### readonlyãƒªãƒã‚¸ãƒˆãƒªã®ç™»éŒ²

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œhttps://github.com/otherteam/skills.git ã‚’å‚ç…§å°‚ç”¨ã§ç™»éŒ²ã—ã¦ã€

Copilot:
  1. git ls-remote ã§æ¥ç¶šç¢ºèª
  2. readonly: true ã§ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã«è¿½åŠ 
  3. ã€Œreadonlyã§ç™»éŒ²ã—ã¾ã—ãŸã€‚pullã®ã¿å¯èƒ½ã§ã™ã€
```

### pullï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨ï¼‰

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œã‚¹ã‚­ãƒ«ã‚’å…¨éƒ¨åŒæœŸã—ã¦ã€

Copilot:
  1. å…¨ãƒªãƒã‚¸ãƒˆãƒªã‚’ cache ã‹ã‚‰fetchï¼ˆåˆå›ã®ã¿cloneï¼‰
  2. å„ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¹ã‚­ãƒ«ã‚’èµ°æŸ»
  3. åŒåç«¶åˆãŒã‚ã‚Œã°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèª
  4. %USERPROFILE%\.copilot\skills\ ã«ã‚³ãƒ”ãƒ¼ã€ãƒ¬ã‚¸ã‚¹ãƒˆãƒªæ›´æ–°
  5. çµæœãƒ¬ãƒãƒ¼ãƒˆï¼ˆæœ‰åŠ¹/ç„¡åŠ¹çŠ¶æ…‹ã‚‚è¡¨ç¤ºï¼‰
```

### push

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œä»Šä½œã£ãŸã‚¹ã‚­ãƒ«ã‚’ team-skills ã«pushã—ã¦ã€

Copilot:
  1. ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‹ã‚‰ team-skills ã®æƒ…å ±ã‚’å–å¾—
  2. SKILL.md ã®å­˜åœ¨ç¢ºèª
  3. clone â†’ ãƒ–ãƒ©ãƒ³ãƒä½œæˆ â†’ ã‚³ãƒ”ãƒ¼ â†’ commit â†’ push
  4. ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥ã¨ãƒ–ãƒ©ãƒ³ãƒåã‚’å ±å‘Š
```

### ã‚¹ã‚­ãƒ«ã®ç„¡åŠ¹åŒ–

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œlegacy-tool ã‚¹ã‚­ãƒ«ã‚’ç„¡åŠ¹åŒ–ã—ã¦ã€

Copilot:
  1. ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã® enabled ã‚’ false ã«å¤‰æ›´
  2. ã€Œlegacy-tool ã‚’ç„¡åŠ¹åŒ–ã—ã¾ã—ãŸã€‚å†æœ‰åŠ¹åŒ–ã¯ 'ã‚¹ã‚­ãƒ«ã‚’æœ‰åŠ¹åŒ–ã—ã¦' ã§å¯èƒ½ã§ã™ã€
```

### æ¤œç´¢ï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³ï¼‰

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œconverter ã§æ¤œç´¢ã—ã¦ã€

Copilot:
  1. ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã® remote_index ã‹ã‚‰ keyword=converter ã§æ¤œç´¢ï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸è¦ï¼‰
  2. çµæœã‚’è¡¨ç¤ºï¼ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–°æ—¥ã‚‚è¡¨ç¤ºï¼‰
```

### æ¤œç´¢ï¼ˆæœ€æ–°ã‚’å–å¾—ï¼‰

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œæœ€æ–°ã®ã‚¹ã‚­ãƒ«ã‚’æ¤œç´¢ã—ã¦ã€

Copilot:
  1. å…¨ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ fetch ã—ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°
  2. æ›´æ–°å¾Œã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‹ã‚‰æ¤œç´¢çµæœã‚’è¡¨ç¤º
```

### ã‚¹ã‚­ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®š

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œdocx-converter ã‚’ä»Šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å›ºå®šã—ã¦ã€

Copilot:
  1. ç¾åœ¨ã® commit_hash ã‚’ pinned_commit ã«è¨­å®š
  2. ã€Œdocx-converter ã‚’ a1b2c3d ã«å›ºå®šã—ã¾ã—ãŸã€
```

### å…¨ã‚¹ã‚­ãƒ«ã®ãƒ­ãƒƒã‚¯

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œå…¨ã‚¹ã‚­ãƒ«ã‚’ãƒ­ãƒƒã‚¯ã—ã¦ã€

Copilot:
  1. å…¨ installed_skills ã® commit_hash ã‚’ pinned_commit ã«è¨­å®š
  2. ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸã‚¹ã‚­ãƒ«ä¸€è¦§ã‚’è¡¨ç¤º
```

### ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«åˆ‡ã‚Šæ›¿ãˆ

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºç”¨ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ‡ã‚Šæ›¿ãˆã¦ã€

Copilot:
  1. frontend ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«è¨­å®š
  2. ã€Œfrontend ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã—ã¾ã—ãŸ: react-guide, css-linter, storybookã€
```
