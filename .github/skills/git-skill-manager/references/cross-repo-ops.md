# ã‚¯ãƒ­ã‚¹ãƒªãƒã‚¸ãƒˆãƒªæ“ä½œï¼ˆdiff / sync / mergeï¼‰

è¤‡æ•°ãƒªãƒã‚¸ãƒˆãƒªã«åˆ†å²ã—ãŸåŒåã‚¹ã‚­ãƒ«ã‚’æ¯”è¼ƒãƒ»çµ±åˆãƒ»é…ä¿¡ã™ã‚‹ãŸã‚ã®æ“ä½œç¾¤ã€‚

## ç›®æ¬¡

- [diff](#diff)
- [sync](#sync)
- [merge](#merge)

## diff

è¤‡æ•°ãƒªãƒã‚¸ãƒˆãƒªã«å­˜åœ¨ã™ã‚‹åŒåã‚¹ã‚­ãƒ«ã®å®Ÿè£…ã‚’æ¯”è¼ƒã—ã€ã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã©ã†ç•°ãªã‚‹ã‹ã‚’è¡¨ç¤ºã™ã‚‹ã€‚
ãƒãƒ¼ã‚¸å‰ã®å·®åˆ†ç¢ºèªã«ä½¿ã†ã€‚

### å‡¦ç†ãƒ•ãƒ­ãƒ¼

â†’ å®Ÿè£…: `scripts/manage.py` â€” `diff_skill(skill_name, repo_names)`

1. ç™»éŒ²ãƒªãƒã‚¸ãƒˆãƒªã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆ`~/.copilot/cache/`ï¼‰ã‹ã‚‰ `skill_name` ã‚’æ¤œç´¢
2. è¦‹ã¤ã‹ã£ãŸãƒªãƒã‚¸ãƒˆãƒªåŒå£«ã‚’ãƒšã‚¢ãƒ¯ã‚¤ã‚ºã§ `git diff --no-index` ã«ã‹ã‘ã‚‹
3. `--stat`ï¼ˆå¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«æ¦‚è¦ï¼‰ã¨è©³ç´°å·®åˆ†ã‚’è¡¨ç¤ºï¼ˆ120è¡Œè¶…ã¯çœç•¥ï¼‰

ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒå¤ã„å ´åˆã¯å…ˆã« `pull` ã¾ãŸã¯ `search --refresh` ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã€‚

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œdocx-converter ã®å·®åˆ†ã‚’è¦‹ã›ã¦ã€

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:
  python manage.py diff docx-converter

  â†’ å‡ºåŠ›ä¾‹:
    ğŸ” ã‚¹ã‚­ãƒ« 'docx-converter' ã®å·®åˆ† (2 ãƒªãƒã‚¸ãƒˆãƒª)

      [team-skills]   commit: a1b2c3d  (2026-01-10)
      [personal]      commit: f4e5d6c  (2026-02-01)

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      team-skills (a1b2c3d)  vs  personal (f4e5d6c)
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     scripts/convert.py | 12 ++++---
     SKILL.md           |  3 +-
     2 files changed, 11 insertions(+), 4 deletions(-)

    @@ -45,7 +45,7 @@
    -    output_format = "pdf"
    +    output_format = kwargs.get("format", "pdf")
    ...
```

-----

## sync

ãƒãƒ¼ã‚¸æ¸ˆã¿ã‚¹ã‚­ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®å®Ÿä½“ï¼ˆ`~/.copilot/skills/<name>/`ï¼‰ã‹ã‚‰ã€è¤‡æ•°ãƒªãƒã‚¸ãƒˆãƒªã¸ä¸€æ‹¬ push ã™ã‚‹ã€‚
`diff` ã§å·®åˆ†ã‚’ç¢ºèªã—ã€skill-creator ã§ãƒãƒ¼ã‚¸ã—ãŸå¾Œã«å®Ÿè¡Œã™ã‚‹ã€‚

### å‡¦ç†ãƒ•ãƒ­ãƒ¼

â†’ å®Ÿè£…: `scripts/manage.py` â€” `sync_skill(skill_name, repo_names)`ã€`scripts/push.py` â€” `push_skill()`

1. `skill_home/<skill_name>/` ã®å­˜åœ¨ç¢ºèªï¼ˆãƒãƒ¼ã‚¸æ¸ˆã¿å®Ÿè£…ãŒã“ã“ã«ã‚ã‚‹å‰æï¼‰
2. æ›¸ãè¾¼ã¿å¯èƒ½ãªãƒªãƒã‚¸ãƒˆãƒªã«å¯¾ã—ã¦ `push_skill()` ã‚’ãƒ«ãƒ¼ãƒ—å®Ÿè¡Œ
3. å„ãƒªãƒã‚¸ãƒˆãƒªã§ `new_branch` æˆ¦ç•¥ã§ãƒ–ãƒ©ãƒ³ãƒã‚’åˆ‡ã‚Šã€PR/MR ä½œæˆã‚’ä¿ƒã™

`repo_names` ã‚’æŒ‡å®šã—ãŸå ´åˆã¯ãã®åå‰ã®ãƒªãƒã‚¸ãƒˆãƒªã®ã¿ã« push ã™ã‚‹ã€‚

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œãƒãƒ¼ã‚¸ã—ãŸ docx-converter ã‚’ team-skills ã¨ personal ã«é…ä¿¡ã—ã¦ã€

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:
  python manage.py sync docx-converter --repos team-skills,personal

  â†’ å‡ºåŠ›ä¾‹:
    ğŸ”„ 'docx-converter' ã‚’ 2 ãƒªãƒã‚¸ãƒˆãƒªã¸åŒæœŸã—ã¾ã™

      â†’ team-skills  (https://github.com/myorg/agent-skills.git)
      â†’ personal     (https://github.com/me/my-skills.git)

    â¬†ï¸  push ä¸­: team-skills ...
      ğŸš€ push å®Œäº†  ãƒ–ãƒ©ãƒ³ãƒ: add-skill/docx-converter
    â¬†ï¸  push ä¸­: personal ...
      ğŸš€ push å®Œäº†  ãƒ–ãƒ©ãƒ³ãƒ: add-skill/docx-converter

    ğŸ“‹ sync çµæœ: docx-converter
      âœ… team-skills
      âœ… personal

    ğŸ’¡ å„ãƒªãƒã‚¸ãƒˆãƒªã§ PR/MR ã‚’ä½œæˆã—ã¦ãƒãƒ¼ã‚¸ã—ã¦ãã ã•ã„
```

-----

## merge

è¤‡æ•°ãƒªãƒã‚¸ãƒˆãƒªã«åˆ†å²ã—ãŸåŒåã‚¹ã‚­ãƒ«ã‚’çµ±åˆã—ã¦å…¨ãƒªãƒã‚¸ãƒˆãƒªã¸é…ä¿¡ã™ã‚‹ã€‚
`diff` â†’ `skill-creator` â†’ `sync` ã®3ã‚¹ãƒ†ãƒƒãƒ—ã‚’1ã¤ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§å‡¦ç†ã™ã‚‹ã€‚

### å‡¦ç†ãƒ•ãƒ­ãƒ¼

â†’ å®Ÿè£…: `scripts/manage.py` â€” `merge_skill(skill_name, repo_names)`

1. `merge_skill()` ã‚’å®Ÿè¡Œã—ã¦å·®åˆ†ã‚’è¡¨ç¤ºã™ã‚‹ï¼ˆå†…éƒ¨ã§ `diff_skill()` ã‚’å‘¼ã³å‡ºã™ï¼‰
2. å‡ºåŠ›ã® `MERGE_GUIDANCE:` ãƒ–ãƒ­ãƒƒã‚¯ã‚’èª­ã¿ã€skill-creator ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’èµ·å‹•ã™ã‚‹
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«çµ±åˆæ–¹é‡ã‚’ç¢ºèªã—ãªãŒã‚‰ãƒãƒ¼ã‚¸å®Ÿè£…ã‚’ç”Ÿæˆã•ã›ã‚‹
   - ç·¨é›†å…ˆã¯ `~/.copilot/skills/<skill_name>/`ï¼ˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã‚¹ã‚­ãƒ«ã‚’ä¸Šæ›¸ãï¼‰
3. skill-creator å®Œäº†å¾Œã« `sync_skill()` ã‚’å®Ÿè¡Œã—ã¦å…¨ãƒªãƒã‚¸ãƒˆãƒªã¸é…ä¿¡ã™ã‚‹

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œdocx-converter ã‚’ team-skills ã¨ personal ã§ãƒãƒ¼ã‚¸ã—ã¦é…ä¿¡ã—ã¦ã€

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:
  1. python manage.py merge docx-converter --repos team-skills,personal
       â†’ å·®åˆ†ã‚’è¡¨ç¤º + MERGE_GUIDANCE: ã‚’å‡ºåŠ›
  2. skill-creator ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’èµ·å‹•ã—ã¦ãƒãƒ¼ã‚¸å®Ÿè£…ã‚’ç”Ÿæˆ
  3. python manage.py sync docx-converter --repos team-skills,personal
       â†’ å„ãƒªãƒã‚¸ãƒˆãƒªã« PR ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
```

å…¨ãƒªãƒã‚¸ãƒˆãƒªã‚’å¯¾è±¡ã«ã™ã‚‹å ´åˆã¯ `--repos` ã‚’çœç•¥ã™ã‚‹ã€‚
